@model MotorShop.Models.Product

<div class="bg-white rounded-lg border overflow-hidden card-hover">
    <a asp-controller="Products" asp-action="Details" asp-route-id="@Model.Id" class="block">
        <div class="relative">
            <img src="@(Model.ImageUrl ?? "https://placehold.co/400x300/e2e8f0/adb5bd?text=MotorShop")" alt="@Model.Name" class="w-full h-40 object-cover">
            @if (Model.OriginalPrice.HasValue && Model.OriginalPrice > Model.Price)
            {
                var discount = Math.Round((1 - Model.Price / Model.OriginalPrice.Value) * 100);
                <div class="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">-@discount%</div>
            }
        </div>
        <div class="p-4">
            <p class="text-xs text-gray-500 mb-1">@Model.Brand.Name</p>
            <h3 class="font-semibold mb-2 h-12 line-clamp-2">@Model.Name</h3>
            <div class="mb-4">
                @if (Model.OriginalPrice.HasValue)
                {
                    <div class="flex items-center space-x-2">
                        <span class="font-bold text-lg text-red-600">@Model.Price.ToString("N0") đ</span>
                        <span class="text-sm text-gray-500 line-through">@Model.OriginalPrice?.ToString("N0") đ</span>
                    </div>
                }
                else
                {
                    <span class="font-bold text-lg text-red-600">@Model.Price.ToString("N0") đ</span>
                }
            </div>
        </div>
    </a>

    <div class="px-4 pb-4">
        <button onclick="handleAddToCart(event, @Model.Id)" class="w-full bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors">
            <i class="fas fa-shopping-cart mr-1"></i>Thêm vào giỏ
        </button>
    </div>
</div>