@model MotorShop.Models.Product
@{
    ViewData["Title"] = "Thông số kỹ thuật";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

@section Head {
    <style>
        .specs-container {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(15px);
            border-radius: 24px;
            border: 1px solid white;
            box-shadow: var(--shadow-card);
            overflow: hidden;
        }

        /* Quick Add Bar */
        .quick-add-bar {
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            padding: 20px;
            border-bottom: 1px solid #f1f5f9;
        }

        .input-pill {
            border: 1px solid #e2e8f0;
            background: white;
            border-radius: 30px;
            padding: 10px 20px;
            font-size: 13px;
            font-weight: 600;
            transition: 0.2s;
        }

            .input-pill:focus {
                border-color: #8b5cf6;
                box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
                outline: none;
            }

        /* Specs Table */
        .table-specs tr {
            transition: 0.2s;
        }

            .table-specs tr:hover {
                background: rgba(255,255,255,0.8);
                transform: scale(1.005);
                box-shadow: 0 2px 10px rgba(0,0,0,0.02);
            }

        .spec-name {
            font-weight: 700;
            color: #64748b;
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .spec-value {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
        }
    </style>
}

<div class="d-flex align-items-center justify-content-between mb-5 fade-in-up">
    <div class="d-flex align-items-center gap-3">
        <a asp-action="Details" asp-route-id="@Model.Id" class="btn btn-white rounded-circle shadow-sm" style="width: 48px; height: 48px; display: grid; place-items: center;">
            <i class="bi bi-arrow-left text-dark fs-5"></i>
        </a>
        <div>
            <h2 class="fw-bolder mb-0 h-value">Thông số kỹ thuật</h2>
            <div class="text-muted small">Cấu hình chi tiết cho <strong>@Model.Name</strong></div>
        </div>
    </div>
</div>

<div class="specs-container fade-in-up delay-1">

    <div class="quick-add-bar">
        <form asp-action="AddSpec" method="post" class="row g-2 align-items-center">
            <input type="hidden" name="productId" value="@Model.Id" />

            <div class="col-md-4">
                <input type="text" name="name" class="form-control input-pill" placeholder="Tên thông số (VD: Động cơ)" required />
            </div>
            <div class="col-md-5">
                <input type="text" name="value" class="form-control input-pill" placeholder="Giá trị (VD: 4 thì, 4 van, SOHC)" required />
            </div>
            <div class="col-md-2">
                <input type="number" name="sortOrder" class="form-control input-pill text-center" placeholder="TT" value="0" />
            </div>
            <div class="col-md-1">
                <button class="btn btn-primary w-100 rounded-pill shadow-sm fw-bold" style="height: 42px; background: var(--grad-success); border: none;">
                    <i class="bi bi-plus-lg"></i>
                </button>
            </div>
        </form>
    </div>

    <div class="p-0">
        <table class="table table-borderless align-middle mb-0 table-specs">
            <thead class="bg-light border-bottom">
                <tr>
                    <th class="ps-4 py-3 text-uppercase text-muted small fw-bold">Thông số</th>
                    <th class="py-3 text-uppercase text-muted small fw-bold">Giá trị chi tiết</th>
                    <th class="text-center text-uppercase text-muted small fw-bold">Thứ tự</th>
                    <th class="text-end pe-4 text-uppercase text-muted small fw-bold">Xóa</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Specifications.OrderBy(s => s.SortOrder))
                {
                    <tr>
                        <td class="ps-4 py-3 spec-name"><i class="bi bi-dot text-primary me-1"></i> @item.Name</td>
                        <td class="py-3 spec-value">@item.Value</td>
                        <td class="text-center text-muted fw-bold font-monospace">@item.SortOrder</td>
                        <td class="text-end pe-4">
                            <form asp-action="DeleteSpec" method="post" class="d-inline">
                                <input type="hidden" name="id" value="@item.Id" />
                                <button class="btn btn-light btn-sm text-danger rounded-circle shadow-sm hover-scale" style="width: 32px; height: 32px;">
                                    <i class="bi bi-x-lg"></i>
                                </button>
                            </form>
                        </td>
                    </tr>
                }
                @if (!Model.Specifications.Any())
                {
                    <tr>
                        <td colspan="4" class="text-center py-5 text-muted">
                            <i class="bi bi-clipboard-x fs-1 opacity-25"></i>
                            <div class="mt-2">Chưa có thông số nào được thiết lập.</div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>